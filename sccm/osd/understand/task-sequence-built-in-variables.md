---
title: Variables intégrées de séquence de tâches
titleSuffix: Configuration Manager
description: Les variables intégrées de séquence de tâches fournissent des informations sur l’environnement dans lequel la séquence de tâches s’exécute. Elles sont disponibles tout au long de la séquence de tâches.
ms.date: 04/18/2018
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: conceptual
ms.assetid: 02bc6bd4-ca53-4e22-8b80-d8ee5fe72567
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: d3ea1b35c5f220155cecafddaf3a2ff1acf5ed53
ms.sourcegitcommit: 0b0c2735c4ed822731ae069b4cc1380e89e78933
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/03/2018
ms.locfileid: "32351657"
---
# <a name="task-sequence-built-in-variables-in-system-center-configuration-manager"></a>Variables intégrées de séquence de tâches dans System Center Configuration Manager

*S’applique à : System Center Configuration Manager (Current Branch)*


 Les variables intégrées de séquence de tâches sont fournies par System Center Configuration Manager. Les variables intégrées fournissent des informations sur l'environnement dans lequel la séquence de tâches est exécutée, et leurs valeurs sont disponibles tout au long de la séquence de tâches. En règle générale, les variables intégrées sont initialisées avant que les étapes soient exécutées dans la séquence de tâches. Par exemple, la variable intégrée **_SMSTSLogPath** est une variable d’environnement qui spécifie le chemin que les composants Configuration Manager utilisent pour écrire les fichiers journaux. Toutes les étapes de la séquence de tâches peuvent accéder à cette variable d’environnement. Toutefois, la séquence de tâches évalue certaines variables, telles que **&#95;SMSTSCurrentActionName**, avant chaque étape. Les valeurs sont lues uniquement pour les variables intégrées dont le nom commence par un trait de soulignement.  

## <a name="task-sequence-built-in-variable-list"></a>Liste des variables intégrées de la séquence de tâches  
 La liste suivante décrit les variables intégrées qui sont disponibles dans Configuration Manager :  

|Nom de variable intégrée|Description|  
|-----------------------------|-----------------|  
|_OSDDetectedWinDir|Au démarrage de Windows PE, la séquence de tâches analyse les disques durs de l’ordinateur à la recherche d’une installation antérieure du système d’exploitation. L’emplacement du dossier Windows est stocké dans cette variable. Vous pouvez configurer votre séquence de tâches pour récupérer cette valeur à partir de l’environnement, et l’utiliser pour spécifier le même emplacement du dossier Windows à utiliser pour la nouvelle installation du système d’exploitation.|  
|_OSDDetectedWinDrive|Au démarrage de Windows PE, la séquence de tâches analyse les disques durs de l’ordinateur à la recherche d’une installation antérieure du système d’exploitation. L’emplacement d’installation du système d’exploitation sur le disque dur est stocké dans cette variable. Vous pouvez configurer votre séquence de tâches pour récupérer cette valeur à partir de l’environnement, et l’utiliser pour spécifier le même emplacement de disque dur à utiliser pour le nouveau système d’exploitation.|  
|_SMSTSAdvertID|Stocke l'ID unique de déploiement de la séquence de tâches en cours d'exécution. Elle utilise le même format qu’un ID de déploiement de distribution logicielle Configuration Manager. Si la séquence de tâches s'exécute à partir d'un média autonome, cette variable n'est pas définie.<br /><br /> Exemple :<br /><br /> **ABC20001**|  
|_TSAppInstallStatus|La séquence de tâches définit la variable _TSAppInstallStatus avec l’état d’installation de l’application lors de l’étape [Installer l’application](task-sequence-steps.md#BKMK_InstallApplication). La séquence de tâches définit la variable sur l'une des valeurs suivantes :<br /><br /> 1. **Non défini** : l’étape Installer l’application n’a pas été exécutée.<br />2. **Erreur** : au moins une application a échoué en raison d’une erreur lors de l’étape Installer l’application.<br />3. **Avertissement** : aucune erreur ne s’est produite pendant l’étape Installer l’application. Une ou plusieurs applications, ou une dépendance nécessaire, n’ont pas été installées car une exigence n’était pas satisfaite.<br />4. **Réussite** : aucune erreur ou avertissement n’a été détecté pendant l’étape Installer l’application.|  
|_SMSTSBootImageID|Si la séquence de tâches en cours d’exécution référence un package d’images de démarrage, cette variable stocke l’ID de package d’images de démarrage. Si la séquence de tâches ne référence pas un package d’images de démarrage, cette variable n’est pas définie.<br /><br /> Exemple :<br /><br /> **ABC00001**|  
|_SMSTSBootUEFI|la séquence de tâches définit la variable SMSTSBootUEFI lorsqu'elle détecte un ordinateur en mode UEFI.|  
|_SMSTSClientGUID|Stocke la valeur du GUID du client Configuration Manager. Cette variable n'est pas définie si la séquence de tâches est exécutée à partir d'un média autonome.<br /><br /> Exemple :<br /><br /> **0a1a9a4b-fc56-44f6-b7cd-c3f8ee37c04c**|  
|_SMSTSCurrentActionName|Spécifie le nom de l'étape de séquence de tâches en cours d'exécution. Cette variable est définie avant que le gestionnaire des séquences de tâches exécute chaque étape individuelle.<br /><br /> Exemple :<br /><br /> **exécuter la ligne de commande**|  
|_SMSTSDownloadOnDemand|Si la séquence de tâches active s’exécute en mode de téléchargement sur demande, cette variable est **true**. Le mode de téléchargement sur demande signifie que le gestionnaire des séquences de tâches télécharge le contenu localement uniquement quand il doit y accéder.|  
|_SMSTSInWinPE|Quand l’étape de séquence de tâches active s’exécute dans Windows PE, cette variable est **true**. Testez cette variable de séquence de tâches pour déterminer l’environnement de système d’exploitation actuel.|  
|_SMSTSLastActionRetCode|Stocke le code de retour qui a été renvoyé par la dernière action exécutée. Cette variable peut être utilisée comme une condition pour déterminer si l'étape suivante est exécutée.<br /><br /> Exemple :<br /><br /> **0**|  
|_SMSTSLastActionSucceeded|Si la dernière étape a réussi, cette variable est **true**. Si la dernière étape a échoué, elle est **false**. Si la séquence de tâches a ignoré la dernière action, car l’étape est désactivée ou la condition associée a été évaluée comme **false**, cette variable n’est pas réinitialisée. Elle contient toujours la valeur de l’action précédente.|  
|_SMSTSLaunchMode|Spécifie l’une des méthodes de lancement de séquence de tâches suivantes :<br /><br /> -   **SMS** : la séquence de tâches a démarré à partir du client Configuration Manager.<br />-   **UFD** : la séquence de tâches a démarré à partir d’un appareil USB hérité.<br />-   **UFD+FORMAT** : la séquence de tâches a démarré à partir d’un appareil USB plus récent.<br />-   **CD** : la séquence de tâches a démarré à partir d’un CD.<br />-   **DVD** : la séquence de tâches a démarré à partir d’un DVD.<br />-   **PXE** : la séquence de tâches a démarré à partir de PXE.<br />-   **HD** : la séquence de tâches a démarré à partir d’un média préparé sur un disque dur.|  
|_SMSTSLogPath|Stocke le chemin d'accès complet du répertoire des journaux. Utilisez cette valeur pour déterminer l’emplacement des actions consignées. Cette valeur n'est pas définie si un disque dur n'est pas disponible.|  
|_SMSTSMachineName|Stocke et spécifie le nom de l'ordinateur. Stocke le nom de l’ordinateur utilisé par la séquence de tâches pour consigner tous les messages d’état. Pour modifier le nom d'ordinateur dans le nouveau système d'exploitation, utilisez la variable **OSDComputerName** .<br /><br /> Exemple :<br /><br /> **ABC**|  
|_SMSTSMDataPath|Spécifie le chemin d'accès défini par la variable SMSTSLocalDataDrive. Quand que vous définissez SMSTSLocalDataDrive avant le démarrage de la séquence de tâches, notamment en définissant une variable de regroupement, Configuration Manager définit ensuite la variable _SMSTSMDataPath une fois que la séquence de tâches démarre.|  
|_SMSTSMediaType|Spécifie le type de média qui est utilisé pour démarrer l'installation. Le média de démarrage, le média complet, l'environnement PXE et le média préparé sont des exemples de types de médias.|  
|_SMSTSMP|Stocke l’URL ou l’adresse IP d’un point de gestion Configuration Manager.|  
|_SMSTSMPPort|Stocke le numéro de port d’un point de gestion Configuration Manager.<br /><br /> Exemple :<br /><br /> **80**|  
|_SMSTSOrgName|Stocke le nom de personnalisation affiché par la séquence de tâches dans la boîte de dialogue de progression.<br /><br /> Exemple :<br /><br /> **Organisation XYZ**|  
|_SMSTSOSUpgradeActionReturnCode|Stocke la valeur du code de sortie retournée par le programme d’installation de Windows pour indiquer la réussite ou l’échec. Cette variable est définie durant l’étape de séquence de tâches [Mettre à niveau le système d’exploitation](task-sequence-steps.md#BKMK_UpgradeOS). Cette variable est utile avec l’option de ligne de commande /Compat.<br /><br /> Exemple :<br /><br /> À l’issue de l’exécution de la commande /Compat, prenez des mesures dans les étapes ultérieures selon que le code de sortie échoue ou réussit. En cas de réussite, lancez la mise à niveau. Ou définissez un marqueur dans l’environnement (par exemple, ajoutez un fichier ou définissez une clé de Registre) à recueillir avec l’inventaire matériel. Utilisez ce marqueur pour créer un regroupement d’ordinateurs prêts pour la mise à niveau ou nécessitant une action avant la mise à niveau.|  
|_SMSTSPackageID|Stocke l'ID de la séquence de tâches en cours d'exécution. Cet ID utilise le même format qu’un ID de package logiciel Configuration Manager.<br /><br /> Exemple :<br /><br /> **HJT00001**|  
|_SMSTSPackageName|Stocke le nom de la séquence de tâches en cours d’exécution spécifié par l’administrateur Configuration Manager au moment où la séquence de tâches est créée.<br /><br /> Exemple :<br /><br /> **Déployer la séquence de tâches de Windows 10**|  
|_SMSTSSetupRollback|Spécifie si le programme d’installation du système d’exploitation a effectué une opération de restauration. Les valeurs des variables peuvent être **true** ou **false**.|  
|_SMSTSRunFromDP|Variable définie sur **vrai** si la séquence de tâches en cours est exécutée en mode exécution à partir du point de distribution, ce qui signifie que le gestionnaire des séquences de tâches obtient des partages de packages requis à partir de points de distribution.|  
|_SMSTSSiteCode|Stocke le code du site Configuration Manager.<br /><br /> Exemple :<br /><br /> **ABC**|  
|_SMSTSType|Spécifie le type de séquence de tâches en cours d'exécution. Il peut afficher les valeurs suivantes :<br /><br /> **1** : indique une séquence de tâches générique.<br /><br /> **2** : indique une séquence de tâches de déploiement du système d'exploitation.|  
|_SMSTSTimezone|La variable _SMSTSTimezone stocke les informations de fuseau horaire au format suivant (sans espaces) :<br /><br /> Biais, StandardBias, DaylightBias, StandardDate.wYear, wMonth, wDayOfWeek, wDay, wHour, wMinute, wSecond, wMilliseconds, DaylightDate.wYear, wMonth, wDayOfWeek, wDay, wHour, wMinute, wSecond, wMilliseconds, StandardName, DaylightName<br /><br /> Exemple :<br /><br /> Pour l'heure de la côte est des États-Unis et du Canada, la valeur serait **300,0,-60,0,11,0,1,2,0,0,0,0,3,0,2,2,0,0,0,Heure standard de la côte est, heure d'été de la côte est**|  
|_SMSTSUseCRL|Quand la séquence de tâches utilise HTTPS pour communiquer avec le point de gestion, spécifie si elle utilise la liste de révocation de certificats.|  
|_SMSTSUserStarted|Spécifie si un utilisateur démarre une séquence de tâches. Cette variable est définie uniquement si la séquence de tâches est démarrée à partir du Centre logiciel. Par exemple, si la variable **_SMSTSLaunchMode** est définie sur **SMS**. La variable peut afficher les valeurs suivantes :<br /><br /> -   **vrai** : spécifie que la séquence de tâches est démarrée manuellement par un utilisateur depuis le Centre logiciel.<br />-   **faux** : spécifie que la séquence de tâches est lancée automatiquement par le planificateur Configuration Manager.|  
|_SMSTSUseSSL|Indique si la séquence de tâches utilise SSL pour communiquer avec le point de gestion Configuration Manager. Si votre site fonctionne en mode natif, la valeur est réglée sur **vrai**.|  
|_SMSTSWTG|spécifie si l'ordinateur s'exécute comme un appareil Windows Go To.|  
|OSDPreserveDriveLetter|Cette variable de séquence de tâches est dépréciée. Pendant le déploiement d’un système d’exploitation, par défaut, le programme d’installation de Windows détermine la meilleure lettre de lecteur à utiliser (généralement, C:). <br /><br />Comportement précédent : lors de l’application d’une image, la variable OSDPreverveDriveLetter détermine si la séquence de tâches utilise ou non la lettre de lecteur capturée dans le fichier d’image (.WIM). Définissez la valeur de cette variable sur **False** pour utiliser l’emplacement que vous spécifiez pour le paramètre **Destination** à l’étape de séquence de tâches **Appliquer le système d’exploitation** . Pour plus d'informations, voir [Apply Operating System Image](task-sequence-steps.md#BKMK_ApplyOperatingSystemImage).|  
|SMSTSAssignmentsDownloadInterval|Délai d’attente (exprimé en secondes) du client entre deux tentatives de téléchargement de la stratégie quand la tentative précédente n’a retourné aucune stratégie. Par défaut, le client attend **0** seconde avant une nouvelle tentative.<br /><br /> Cette variable peut être définie à l'aide d'une commande de prédémarrage à partir du média ou de l'environnement PXE.|  
|SMSTSAssignmentsDownloadRetry|Nombre de tentatives de téléchargement de la stratégie par un client quand aucune stratégie n’est trouvée à la première tentative. Par défaut, le client effectue **0** nouvelle tentative.<br /><br /> Cette variable peut être définie à l'aide d'une commande de prédémarrage à partir du média ou de l'environnement PXE.|  
|SMSTSAssignUsersMode|Spécifie la façon dont une séquence de tâches associe des utilisateurs à l'ordinateur de destination. Définissez la variable sur l'une des valeurs suivantes :<br /><br /> -   **Auto** : la séquence de tâches crée une relation entre les utilisateurs spécifiés et l’ordinateur de destination pendant le déploiement du système d’exploitation sur l’ordinateur de destination.<br />-   **En attente** : la séquence de tâches crée une relation entre les utilisateurs spécifiés et l’ordinateur de destination. Un administrateur doit approuver la relation pour la définir.<br />-   **Désactivé** : la séquence de tâches n’associe pas d’utilisateurs à l’ordinateur de destination pendant le déploiement du système d’exploitation.|  
|SMSTSDownloadAbortCode|Cette variable contient la valeur du code d’abandon pour le téléchargeur du programme externe (spécifié dans la variable SMSTSDownloadProgram). Si le programme retourne un code d’erreur égal à la valeur de la variable SMSTSDownloadAbortCode, le téléchargement du contenu échoue et aucune autre méthode de téléchargement n’est tentée.
|SMSTSDownloadProgram|Cette variable permet de spécifier un Autre fournisseur de contenu, un téléchargeur utilisé pour télécharger du contenu à la place du programme de téléchargement Configuration Manager par défaut, pour la séquence tâches. Dans le cadre du processus de téléchargement de contenu, la séquence de tâches examine si la variable indique un programme de téléchargement spécifique. Si c'est le cas, la séquence de tâches l'exécute pour procéder au téléchargement.|  
|SMSTSDownloadRetryCount|Nombre de fois que Configuration Manager tente de télécharger du contenu à partir d’un point de distribution. Par défaut, le client effectue **2** nouvelles tentatives.|  
|SMSTSDownloadRetryDelay|Délai d’attente de Configuration Manager (en secondes) avant qu’il tente à nouveau de télécharger du contenu à partir d’un point de distribution. Par défaut, le client attend **15** secondes avant une nouvelle tentative.|
|SMSTSDriverReceiveTimeOut|Nombre de secondes avant l’expiration de la connexion au serveur.|
|SMSTSErrorDialogTimeout|Quand une erreur se produit dans une séquence de tâches, elle affiche une boîte de dialogue avec l’erreur. La séquence de tâches la fait disparaître automatiquement après le nombre de secondes spécifié par cette variable. La valeur par défaut est **900** secondes (15 minutes).|  
| TSDisableProgressUI | <!-- 1354291 --> À compter de Configuration Manager version 1706, utilisez cette variable pour contrôler quand la séquence de tâches affiche la progression aux utilisateurs finaux. Pour masquer ou afficher la progression à des moments différents, définissez cette variable plusieurs fois dans une séquence de tâches. Pour masquer la progression de la séquence de tâches, définissez la valeur de cette variable sur **True**. Pour afficher la progression de la séquence de tâches, définissez la valeur de cette variable sur **False**. | 
| SMSTSDisableStatusRetry | <!--512358--> Dans les scénarios déconnectés, le moteur de séquence de tâches tente à plusieurs reprises d’envoyer des messages d’état au point de gestion. Dans ce scénario, ce comportement entraîne des retards dans le traitement des séquences de tâches. À compter de Configuration Manager version 1802, définissez cette variable sur **True** pour que le moteur de séquence de tâches ne tente pas d’envoyer des messages d’état si l’envoi du premier message a échoué. Cette première tentative inclut plusieurs nouvelles tentatives.<br/><br/>Lorsque la séquence de tâches redémarre, la valeur de cette variable persiste. Toutefois, la séquence de tâches tente d’envoyer un premier message d’état. Cette première tentative inclut plusieurs nouvelles tentatives. En cas de réussite, la séquence de tâches continue à envoyer l’état indépendamment de la valeur de cette variable. Si l’envoi de l’état échoue, la séquence de tâches utilise la valeur de cette variable.<br/><br/>REMARQUE : [Le rapport d’état de la séquence de tâches](/sccm/core/servers/manage/list-of-reports#task-sequence---deployment-status) se base sur ces messages d’état pour montrer la progression, l’historique et les détails de chaque étape. | 
|SMSTSLanguageFolder|utilisez cette variable pour modifier la langue d'affichage d'une image de démarrage indépendante de la langue.|  
|SMSTSLocalDataDrive|Spécifie l'emplacement de stockage des fichiers temporaires sur l'ordinateur de destination lors de l'exécution de la séquence de tâches.<br /><br /> Cette variable doit être définie avant le démarrage de la séquence de tâches, notamment en définissant une variable de regroupement. Une fois que la séquence de tâches démarre, Configuration Manager définit la variable _SMSTSMDataPath.|  
|SMSTSMP|Utilisez cette variable pour spécifier l’URL ou l’adresse IP du point de gestion Configuration Manager.|  
|SMSTSPeerDownload|Utilisez cette variable pour permettre au client d’utiliser la mise en cache d’homologue Windows PE.<br /><br /> Exemple :<br /><br /> SMSTSPeerDownload = **TRUE** active cette fonctionnalité.|  
|SMSTSPeerRequestPort|Port réseau personnalisé utilisé par le cache d’homologue de Windows PE pour la diffusion initiale. Le port par défaut configuré dans les paramètres client est 8004.|  
|SMSTSPersistContent|utilisez cette variable pour conserver temporairement le contenu du cache de la séquence de tâches.|  
|SMSTSPostAction|Spécifie une commande exécutée une fois la séquence de tâches terminée. Par exemple, vous pouvez utiliser cette variable pour spécifier un script qui active des filtres d'écriture sur les appareils intégrés après que la séquence de tâches a déployé un système d'exploitation sur l'appareil.|  
|SMSTSPreferredAdvertID|Force la séquence de tâches à exécuter un déploiement ciblé spécifique sur l’ordinateur de destination. Définissez cette variable à l’aide d’une commande de prédémarrage à partir de média ou PXE. Si cette variable est définie, la séquence de tâches se substitue à tous les déploiements requis.|  
|SMSTSPreserveContent|Cette variable marque le contenu dans la séquence de tâches pour qu’il soit conservé dans le cache du client Configuration Manager après le déploiement. Cette variable est différente de SMSTSPersistContent, qui conserve le contenu uniquement pendant la durée de la séquence de tâches. SMSTSPersistContent utilise le cache de séquence de tâches, tandis que SMSTSPreserveContent utilise le cache du client Configuration Manager.<br /><br /> Exemple :<br /><br /> SMSTSPreserveContent = **TRUE** active cette fonctionnalité.|  
|SMSTSRebootDelay|Spécifie le nombre de secondes à attendre avant que l'ordinateur redémarre. Si cette variable est zéro (0), le gestionnaire des séquences de tâches n’affiche pas de boîte de dialogue de notification avant le redémarrage.<br /><br /> Exemples :<br /><br /> **0** : ne pas afficher de notification<br /><br /> **60** : afficher une notification pendant une minute|  
|SMSTSRebootMessage|Spécifie le message à afficher dans la boîte de dialogue de notification de redémarrage. Si vous ne définissez pas cette variable, un message par défaut apparaît.<br /><br /> Exemple :<br /><br /> **La séquence de tâches redémarre cet ordinateur**.|  
|SMSTSRebootRequested|Indique qu'un redémarrage est demandé après que l'étape de séquence de tâches en cours est terminée. Si un redémarrage est nécessaire, définissez simplement cette variable sur **vrai**et le gestionnaire des séquences de tâches redémarrera l'ordinateur après cette étape de la séquence de tâches. Si l’étape de séquence de tâches nécessite un redémarrage pour terminer l’action, définissez cette variable. Après le redémarrage de l’ordinateur, la séquence de tâches continue à s’exécuter à partir de l’étape de séquence de tâches suivante.|  
|SMSTSRetryRequested|Demande une nouvelle tentative après la fin de l'étape de séquence de tâches en cours. Si cette variable de séquence de tâches est définie, la variable **SMSTSRebootRequested** doit également être définie sur **vrai**. Après le redémarrage de l'ordinateur, le gestionnaire des séquences de tâches exécute à nouveau la même étape de la séquence de tâches.|  
|SMSTSUDAUsers|Spécifie les utilisateurs principaux de l’ordinateur de destination en utilisant le format suivant :<br /><br /> Exemple :<br /><br /> **domaine\utilisateur1, domaine\utilisateur2, domaine\utilisateur3**<br /><br /> Séparez plusieurs utilisateurs à l'aide d'une virgule (,). Pour plus d’informations, consultez [Associer des utilisateurs à un ordinateur de destination](../get-started/associate-users-with-a-destination-computer.md).|  
 
